{% extends "base.html" %}
{% block content %}
<div class="wispy-frame">
  <div class="d-flex align-items-center mb-4">
    <img src="{{ url_for('static', filename='images/wispy.webp') }}" alt="Wispy" class="rounded-circle me-3" style="width: 80px; height: 80px;">
    <div>
      <h3 class="mb-0">Hello, {{ user.email or "Adventurer" }}!</h3>
      <p class="text-muted mb-0">Your brushstrokes await!</p>
    </div>
  </div>

  <div class="card border-0 shadow-sm mb-3">
    <div class="card-body">
      <h5 class="fw-bold">Brushstroke Usage</h5>
      <p class="mb-1">Used: <strong>{{ usage }}</strong> brushstrokes</p>
      <p class="mb-2">Current billing tier: <strong>${{ current_cost }}</strong></p>
      <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#pricingModal">
        View pricing model
      </button>
    </div>
  </div>

  <div class="d-flex gap-2">
    <a href="{{ url_for('portal') }}" class="btn btn-wispy">Manage Account</a>
    <a href="{{ url_for('generate') }}" class="btn btn-outline-dark">Generate an Image</a>
  </div>
</div>

<!-- Pricing Modal -->
<div class="modal fade" id="pricingModal" tabindex="-1" aria-labelledby="pricingModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-light">
        <h5 class="modal-title" id="pricingModalLabel">Quickbrush Pricing & Brushstroke Guide</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p>
          Brushstrokes are the magical pigments that power your creations.
          Each month, your brushstrokes <strong>renew like fresh paints</strong> â€” use them before they fade!
        </p>

        <hr>

        <h6 class="fw-bold">âœ¨ How Brushstrokes Work</h6>
        <p>
          Every image you generate costs a few brushstrokes depending on its quality:
        </p>
        <ul>
          <li><strong>1 brushstroke</strong> â€” Low Quality (quick sketch)</li>
          <li><strong>3 brushstrokes</strong> â€” Medium Quality (refined detail)</li>
          <li><strong>5 brushstrokes</strong> â€” High Quality (fully rendered masterpiece)</li>
        </ul>

        <p class="mb-3">
          For example:
        </p>
        <ul>
          <li>With <strong>50 brushstrokes</strong>, you could create 50 quick sketches, 16 medium pieces, or 10 high-quality images.</li>
          <li>With <strong>250 brushstrokes</strong>, you could paint 250 sketches or about 80 detailed artworks!</li>
        </ul>

        <hr>

        <h6 class="fw-bold">ðŸ’° Monthly Pricing</h6>
        <p>Your brushstroke usage is tracked automatically each month. When the month ends, your saved payment method will be <strong>charged automatically</strong> based on your total brushstrokes used:</p>
        <ul>
          <li>1â€“50 brushstrokes â€” <strong>$1.00</strong></li>
          <li>51â€“250 brushstrokes â€” <strong>$5.00</strong></li>
          <li>251â€“500 brushstrokes â€” <strong>$10.00</strong></li>
          <li>501â€“1,000 brushstrokes â€” <strong>$20.00</strong></li>
          <li>1,001+ brushstrokes â€” <strong>$0.025 each</strong></li>
        </ul>

        <p class="text-muted">
          <em>Think of it like a magical paint well â€” it refills each month, but unused brushstrokes fade with the moonâ€™s turning. Create freely, and let your imagination do the rest!</em>
        </p>
      </div>
    </div>
  </div>
</div>

{% endblock %}
